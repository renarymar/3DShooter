using UnityEngine;

namespace Geekbrains
{
	public class InputController :BaseController
	{
		private int _indexWeapons;

		private void Update()
		{
			if (Input.GetKeyDown(KeyCode.F))
			{
				Main.Instance.LightController.Swith();
			}

			if (Input.GetAxis("Mouse ScrollWheel") > 0)
			{
				if (_indexWeapons < Main.Instance.ObjectManager.Weapons.Length - 1)
				{
					_indexWeapons++;
				}
				else
				{
					_indexWeapons = -1;
				}
				SetWeapon(_indexWeapons);
			}
			else if (Input.GetAxis("Mouse ScrollWheel") < 0)
			{
				if (_indexWeapons <= 0)
				{
					_indexWeapons = Main.Instance.ObjectManager.Weapons.Length;
				}
				else
				{
					_indexWeapons--;
				}
				SetWeapon(_indexWeapons);
			}

			if (Input.GetKeyDown(KeyCode.Alpha1))
			{
				SetWeapon(0);
			}
		}

		private void SetWeapon(int i)
		{
			Main.Instance.WeaponController.Off();

			if (i < 0 || i >= Main.Instance.ObjectManager.Weapons.Length) return;
			var tempWeapon = Main.Instance.ObjectManager.Weapons[i];
			if (tempWeapon != null) Main.Instance.WeaponController.On(tempWeapon);
		}
	}
}